<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Game 1</title>
<link rel="shortcut icon" href="#">
<link href="css/loader.css" rel="stylesheet" type="text/css">
<link href="css/UI.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
<style type="text/css">
	
#slide {
	position:absolute;
	width:auto;
	height:auto;
	min-height: 844px;
	top: 0px;
	transition: transform .6s;
	user-drag: none; 
	user-select: none;
	-moz-user-select: none;
	-webkit-user-drag: none;
	-webkit-user-select: none;
	-ms-user-select: none;
}

.game{

}
</style>
	
<script src="lib/jquery-3.6.0.min.js" type="text/javascript"></script>
	
<script type="text/javascript">
	
var urlParams = {};
(function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = window.location.search.substring(1);

	while (match = search.exec(query)) urlParams[decode(match[1])] = decode(match[2]);
})();

var currPageName = "game";
var planName = "plan_v5";
var currPageFName = currPageName + ".html";
var stellageFName = "stellage5.html";
var planFName = planName + ".html";
var initG = 1;
var paramG = ("g" in urlParams) ? urlParams["g"] : initG;
var stellageName = ("st" in urlParams) ? urlParams["st"] : "fruits";
var referrerName = ("r" in urlParams) ? urlParams["r"] : planName;
var referrerFName = referrerName + ".html";
var productName = stellageName;
var strParams = "?st=" + stellageName + "&r=" + currPageName + "&g=" + ((paramG % 2) + 1);
	
function onLoadActions(){
	$('.loader').fadeOut(300, function(){
		$("#v1").get(0).play();
		$(this).remove();
	});
}
	
$(window).on('load', function(){
//	console.log('loaded: ' + (new Date().getTime() - t0)/1000)
	setTimeout(onLoadActions, 1000); 
});

$(document).ready(function (){
    var scroll_zoom = new DR($('#container'),5,0.1);
	setVideo(paramG);
})

function DR(container,max_scale,factor){
	$("#slide").css('transform','translateY(0px)');

  	$("#backButton, #v1").hover(
		function() { $(this).css('cursor', 'pointer'); },
		function() { $(this).css('cursor','auto'); }
	);
	
  	$("#v1").on('click', function() {
        var currVideo = $(this).get(0);
		currVideo.paused ? currVideo.play() : currVideo.pause();
    });
	
  	$(".bbutt").hover(
		function() { $(this).css({'cursor':'pointer', 'opacity':'100'});},
		function() { $(this).css({'cursor':'auto', 'opacity':'0'})}
    );
	
  	$(".bbutt").on('click', function() {
        location = this.dataset.page + ".html";
    });
		
  	$("#backButton").on('click', function() {
//		console.log(referrerFName + strParams)
		if ("r" in urlParams) history.back();
        else window.location = planFName + "?g=" + ((paramG % 2) + 1);

    });
	
	$("#v1").get(0).onended = function(e) {
		if ("r" in urlParams) history.back();
        else window.location = planFName + "?g=" + ((paramG % 2) + 1);
	}
}
	
function setVideo(n){
	$('#v1').children().first().attr("src", "img/GAME_" + paramG + ".mp4");
	$('#v1').attr("preload", "auto");
	$('#v1').get(0).load();
}

</script>
</head>

<body>
<div id="main" draggable="false">

<div class="loader"><div class="ld">
<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
</div></div>
	
<div id="topButtons">
	<img alt="Top Buttons" src="img/buttons/bbuttons.png"/>
	<img class="bbutt" alt="home" src="img/buttons/home.png" data-page="plan_v5" style="left:23px; top:8px;"/>
	<img class="bbutt" alt="filter" src="img/buttons/filter.png" data-page="plan_v5" style="left:98px; top:8px;"/>
	<img class="bbutt" alt="search" src="img/buttons/search.png" data-page="plan_v5" style="left:173px; top:8px;"/>
	<img class="bbutt" alt="fav" src="img/buttons/fav.png" data-page="plan_v5" style="left:248px; top:8px;"/>
	<img class="bbutt" alt="Cart" src="img/buttons/basket.png" data-page="plan_v5" style="left:323px; top:8px;"/>
</div>

<div id="container" draggable="false">
	<div id="slide">
		<video id="v1" muted>
			<source id="s1" src="#" type="video/mp4"> Your browser does not support the video tag.
		</video> 
	</div>
</div>
<div id="bottomButtons">
	<div id="backButton">
		<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 	viewBox="0 0 6.23 10.52" style="enable-background:new 0 0 6.23 10.52; display: inline-block; width: 8px; vertical-align: middle;" xml:space="preserve">
		<style type="text/css">
			.st0{fill:none;stroke:#ffffff;stroke-linecap:round;}
		</style>
		<g>
			<path class="st0" d="M5.73,10.02l-5-4.77l5-4.75"/>
		</g>
		</svg>&nbsp;&nbsp;&nbsp;Back
	</div>
	<img alt="Bottom Buttons" src="img/buttons/bbuttons.png"/>
	<img id="home" class="bbutt" alt="home" src="img/buttons/home.png" data-page="plan_v5" style="left:23px; top:8px;"/>
	<img id="filter" class="bbutt" alt="filter" src="img/buttons/filter.png" data-page="plan_v5" style="left:98px; top:8px;"/>
	<img id="search" class="bbutt" alt="search" src="img/buttons/search.png" data-page="plan_v5" style="left:173px; top:8px;"/>
	<img id="fav" class="bbutt" alt="fav" src="img/buttons/fav.png" data-page="plan_v5" style="left:248px; top:8px;"/>
	<img id="basket" class="bbutt" alt="" src="img/buttons/basket.png" data-page="plan_v5" style="left:323px; top:8px;"/>
</div>

</div>
</body>
</html>
